(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{9925:function(e,s,n){Promise.resolve().then(n.bind(n,2748))},2748:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return l}});var r=n(2265),a=n(2592),t=n(7437);function i(e){let{children:s}=e,{user:n,loading:i}=(0,a.a)();return((0,r.useEffect)(()=>{i||n||(window.location.href="/login")},[n,i]),i)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-eeadb-blue mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"V\xe9rification de l'authentification..."})]})}):n?s:null}var l=()=>{let e=(0,a.a)(),s=null==e?void 0:e.user;null==e||e.login;let n=null==e?void 0:e.logout,[l,o]=(0,r.useState)({type:"pasteur",nom:"",prenoms:"",poste:"",anneeMinistere:"",profession:"",photo:null,epouse:{nom:"",prenoms:"",poste:"",photo:null},membres:[]}),[d,m]=(0,r.useState)({pasteur:[],diacres:[],departements:[]}),[c,p]=(0,r.useState)({username:"",password:""}),[u,x]=(0,r.useState)(!1);(0,r.useEffect)(()=>{s&&m({pasteur:[{id:1,nom:"Pasteur Jean Doe",prenoms:"Jean",anneeMinistere:2010,photo:"/eeadb-tchirimina/images/pasteur.jpg",poste:"Pasteur Principal"},{id:2,nom:"Mme Pasteur Doe",prenoms:"Marie",anneeMinistere:2010,photo:"/eeadb-tchirimina/images/mme-pasteur.jpg",poste:"Femme du Pasteur"}],diacres:[{id:3,nom:"Diacre Paul Smith",prenoms:"Paul",poste:"Diacre Principal",profession:"M\xe9decin",photo:"/eeadb-tchirimina/images/diacre1.jpg",epouse:{nom:"Mme Diacre Smith",prenoms:"Sophie",photo:"/eeadb-tchirimina/images/mme-diacre1.jpg",poste:"Epouse du Diacre Principal"}}],departements:[{id:5,nom:"Responsable D\xe9partement Adoration",prenoms:"Thomas",poste:"Responsable Adoration",photo:"/eeadb-tchirimina/images/responsable-adoration.jpg",membres:[{id:6,nom:"Membre Adoration 1",prenoms:"Jean",poste:"Animateur Adoration",photo:"/eeadb-tchirimina/images/membre-adoration1.jpg"}]}]})},[s]);let h=e=>{let{name:s,value:n}=e.target;if(s.startsWith("epouse.")){let e=s.split(".")[1];o(s=>({...s,epouse:{...s.epouse,[e]:n}}))}else o(e=>({...e,[s]:n}))},b=e=>{let{name:s,files:n}=e.target;o(e=>({...e,[s]:n[0]||null}))},j=async e=>{if(e.preventDefault(),console.log("Donn\xe9es \xe0 sauvegarder:",l),"pasteur"===l.type)m(e=>({...e,pasteur:[...e.pasteur,{...l,id:Date.now()}]}));else if("diacre"===l.type)m(e=>({...e,diacres:[...e.diacres,{...l,id:Date.now()}]}));else if("departement"===l.type)m(e=>({...e,departements:[...e.departements,{...l,id:Date.now(),membres:[]}]}));else if("membre"===l.type){let e=d.departements.findIndex(e=>e.id==l.departementId);if(-1!==e){let s=[...d.departements];s[e].membres=[...s[e].membres,{...l,id:Date.now()}],m(e=>({...e,departements:s}))}}o({type:"pasteur",nom:"",prenoms:"",poste:"",anneeMinistere:"",profession:"",photo:null,epouse:{nom:"",prenoms:"",poste:"",photo:null},membres:[]}),alert("Informations sauvegard\xe9es avec succ\xe8s !")};return(0,t.jsx)(i,{children:(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,t.jsx)("div",{className:"max-w-6xl mx-auto px-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-eeadb-blue",children:"Administration des Dirigeants"}),(0,t.jsx)("button",{onClick:()=>n&&n(),className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded transition-colors",children:"D\xe9connexion"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-eeadb-blue mb-4",children:"Ajouter/Modifier un Dirigeant"}),(0,t.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Type"}),(0,t.jsxs)("select",{name:"type",value:l.type,onChange:h,className:"w-full p-2 border border-gray-300 rounded",children:[(0,t.jsx)("option",{value:"pasteur",children:"Pasteur"}),(0,t.jsx)("option",{value:"diacre",children:"Diacre"}),(0,t.jsx)("option",{value:"departement",children:"Responsable D\xe9partement"}),(0,t.jsx)("option",{value:"membre",children:"Membre D\xe9partement"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Nom"}),(0,t.jsx)("input",{type:"text",name:"nom",value:l.nom,onChange:h,className:"w-full p-2 border border-gray-300 rounded",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Pr\xe9noms"}),(0,t.jsx)("input",{type:"text",name:"prenoms",value:l.prenoms,onChange:h,className:"w-full p-2 border border-gray-300 rounded",required:!0})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Poste"}),(0,t.jsx)("input",{type:"text",name:"poste",value:l.poste,onChange:h,className:"w-full p-2 border border-gray-300 rounded",required:!0})]}),"pasteur"===l.type&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Ann\xe9e de minist\xe8re"}),(0,t.jsx)("input",{type:"number",name:"anneeMinistere",value:l.anneeMinistere,onChange:h,className:"w-full p-2 border border-gray-300 rounded",min:"1900",max:"2030"})]}),"diacre"===l.type&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Profession"}),(0,t.jsx)("input",{type:"text",name:"profession",value:l.profession,onChange:h,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Photo"}),(0,t.jsx)("input",{type:"file",name:"photo",onChange:b,className:"w-full p-2 border border-gray-300 rounded",accept:"image/*"})]}),"diacre"===l.type&&(0,t.jsxs)("div",{className:"border-t pt-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-eeadb-blue mb-3",children:"\xc9pouse du Diacre"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Nom"}),(0,t.jsx)("input",{type:"text",name:"epouse.nom",value:l.epouse.nom,onChange:h,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Pr\xe9noms"}),(0,t.jsx)("input",{type:"text",name:"epouse.prenoms",value:l.epouse.prenoms,onChange:h,className:"w-full p-2 border border-gray-300 rounded"})]})]}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Poste"}),(0,t.jsx)("input",{type:"text",name:"epouse.poste",value:l.epouse.poste,onChange:h,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Photo"}),(0,t.jsx)("input",{type:"file",name:"epouse.photo",onChange:b,className:"w-full p-2 border border-gray-300 rounded",accept:"image/*"})]})]}),(0,t.jsx)("button",{type:"submit",className:"w-full bg-eeadb-blue-700 hover:bg-eeadb-blue-800 text-white font-bold py-3 px-4 rounded transition-colors",children:"Enregistrer"})]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-eeadb-blue mb-4",children:"Aper\xe7u des Dirigeants"}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-3",children:"Pasteurs"}),(0,t.jsx)("div",{className:"space-y-3",children:d.pasteur.map(e=>(0,t.jsxs)("div",{className:"border-b pb-2",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Nom:"})," ",e.nom]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Pr\xe9noms:"})," ",e.prenoms]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Poste:"})," ",e.poste]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Ann\xe9e de minist\xe8re:"})," ",e.anneeMinistere]})]},e.id))})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-3",children:"Diacres"}),(0,t.jsx)("div",{className:"space-y-3",children:d.diacres.map(e=>(0,t.jsxs)("div",{className:"border-b pb-2",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Nom:"})," ",e.nom]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Profession:"})," ",e.profession]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Poste:"})," ",e.poste]}),e.epouse&&(0,t.jsx)("div",{className:"ml-4 mt-2",children:(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-medium",children:"\xc9pouse:"})," ",e.epouse.nom]})})]},e.id))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-3",children:"Responsables D\xe9partements"}),(0,t.jsx)("div",{className:"space-y-3",children:d.departements.map(e=>(0,t.jsxs)("div",{className:"border-b pb-2",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Nom:"})," ",e.nom]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Poste:"})," ",e.poste]}),e.membres&&e.membres.length>0&&(0,t.jsxs)("div",{className:"ml-4 mt-2",children:[(0,t.jsx)("p",{className:"font-medium",children:"Membres:"}),(0,t.jsx)("ul",{children:e.membres.map(e=>(0,t.jsxs)("li",{children:[e.nom," - ",e.poste]},e.id))})]})]},e.id))})]})]})]})]})})})})}},2592:function(e,s,n){"use strict";n.d(s,{a:function(){return i},default:function(){return d}});var r=n(2265),a=n(7437);let t=(0,r.createContext)();function i(){return(0,r.useContext)(t)}let l=()=>{{let e=new URLSearchParams(window.location.search).get("token");if(e)return o(e)}return!1},o=e=>"admin123"===e;function d(e){let{children:s}=e,[n,i]=(0,r.useState)(null),[o,d]=(0,r.useState)(!0),m=async e=>{try{if(e&&e.username)return i(e),{success:!0,message:"Connexion r\xe9ussie"};return{success:!1,message:"Donn\xe9es d'utilisateur manquantes"}}catch(e){return{success:!1,message:"Erreur de connexion"}}},c=async()=>{try{i(null),window.location.href="/"}catch(e){console.error("Erreur de d\xe9connexion:",e)}},p=async()=>{try{l()?i({name:"Membre privil\xe9gi\xe9",role:"private_access"}):i(null)}catch(e){console.error("Erreur lors de la v\xe9rification de l'authentification:",e),i(null)}finally{d(!1)}};return(0,r.useEffect)(()=>{p()},[]),(0,a.jsx)(t.Provider,{value:{user:n,login:m,logout:c,loading:o,checkAuthStatus:p},children:s})}}},function(e){e.O(0,[971,529,744],function(){return e(e.s=9925)}),_N_E=e.O()}]);