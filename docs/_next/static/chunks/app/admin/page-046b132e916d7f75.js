(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{8285:function(e,s,n){Promise.resolve().then(n.bind(n,2748))},2921:function(e,s,n){"use strict";var r=n(6168);n.o(r,"useRouter")&&n.d(s,{useRouter:function(){return r.useRouter}})},2748:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return o}});var r=n(2265),a=n(2592),t=n(2921),i=n(7437);function l(e){let{children:s}=e,{user:n,loading:l}=(0,a.a)(),o=(0,t.useRouter)();return((0,r.useEffect)(()=>{l||n||o.push("/login")},[n,l,o]),l)?(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-eeadb-blue mx-auto"}),(0,i.jsx)("p",{className:"mt-4 text-gray-600",children:"V\xe9rification de l'authentification..."})]})}):n?s:null}var o=()=>{let e=(0,a.a)(),s=null==e?void 0:e.user;null==e||e.login;let n=null==e?void 0:e.logout,[t,o]=(0,r.useState)({type:"pasteur",nom:"",prenoms:"",poste:"",anneeMinistere:"",profession:"",photo:null,epouse:{nom:"",prenoms:"",poste:"",photo:null},membres:[]}),[d,m]=(0,r.useState)({pasteur:[],diacres:[],departements:[]}),[c,u]=(0,r.useState)({username:"",password:""}),[p,x]=(0,r.useState)(!1);(0,r.useEffect)(()=>{s&&m({pasteur:[{id:1,nom:"Pasteur Jean Doe",prenoms:"Jean",anneeMinistere:2010,photo:"/eeadb-tchirimina/images/pasteur.jpg",poste:"Pasteur Principal"},{id:2,nom:"Mme Pasteur Doe",prenoms:"Marie",anneeMinistere:2010,photo:"/eeadb-tchirimina/images/mme-pasteur.jpg",poste:"Femme du Pasteur"}],diacres:[{id:3,nom:"Diacre Paul Smith",prenoms:"Paul",poste:"Diacre Principal",profession:"M\xe9decin",photo:"/eeadb-tchirimina/images/diacre1.jpg",epouse:{nom:"Mme Diacre Smith",prenoms:"Sophie",photo:"/eeadb-tchirimina/images/mme-diacre1.jpg",poste:"Epouse du Diacre Principal"}}],departements:[{id:5,nom:"Responsable D\xe9partement Adoration",prenoms:"Thomas",poste:"Responsable Adoration",photo:"/eeadb-tchirimina/images/responsable-adoration.jpg",membres:[{id:6,nom:"Membre Adoration 1",prenoms:"Jean",poste:"Animateur Adoration",photo:"/eeadb-tchirimina/images/membre-adoration1.jpg"}]}]})},[s]);let h=e=>{let{name:s,value:n}=e.target;if(s.startsWith("epouse.")){let e=s.split(".")[1];o(s=>({...s,epouse:{...s.epouse,[e]:n}}))}else o(e=>({...e,[s]:n}))},b=e=>{let{name:s,files:n}=e.target;o(e=>({...e,[s]:n[0]||null}))},j=async e=>{if(e.preventDefault(),console.log("Donn\xe9es \xe0 sauvegarder:",t),"pasteur"===t.type)m(e=>({...e,pasteur:[...e.pasteur,{...t,id:Date.now()}]}));else if("diacre"===t.type)m(e=>({...e,diacres:[...e.diacres,{...t,id:Date.now()}]}));else if("departement"===t.type)m(e=>({...e,departements:[...e.departements,{...t,id:Date.now(),membres:[]}]}));else if("membre"===t.type){let e=d.departements.findIndex(e=>e.id==t.departementId);if(-1!==e){let s=[...d.departements];s[e].membres=[...s[e].membres,{...t,id:Date.now()}],m(e=>({...e,departements:s}))}}o({type:"pasteur",nom:"",prenoms:"",poste:"",anneeMinistere:"",profession:"",photo:null,epouse:{nom:"",prenoms:"",poste:"",photo:null},membres:[]}),alert("Informations sauvegard\xe9es avec succ\xe8s !")};return(0,i.jsx)(l,{children:(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,i.jsx)("div",{className:"max-w-6xl mx-auto px-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-eeadb-blue",children:"Administration des Dirigeants"}),(0,i.jsx)("button",{onClick:()=>n&&n(),className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded transition-colors",children:"D\xe9connexion"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,i.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-eeadb-blue mb-4",children:"Ajouter/Modifier un Dirigeant"}),(0,i.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Type"}),(0,i.jsxs)("select",{name:"type",value:t.type,onChange:h,className:"w-full p-2 border border-gray-300 rounded",children:[(0,i.jsx)("option",{value:"pasteur",children:"Pasteur"}),(0,i.jsx)("option",{value:"diacre",children:"Diacre"}),(0,i.jsx)("option",{value:"departement",children:"Responsable D\xe9partement"}),(0,i.jsx)("option",{value:"membre",children:"Membre D\xe9partement"})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Nom"}),(0,i.jsx)("input",{type:"text",name:"nom",value:t.nom,onChange:h,className:"w-full p-2 border border-gray-300 rounded",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Pr\xe9noms"}),(0,i.jsx)("input",{type:"text",name:"prenoms",value:t.prenoms,onChange:h,className:"w-full p-2 border border-gray-300 rounded",required:!0})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Poste"}),(0,i.jsx)("input",{type:"text",name:"poste",value:t.poste,onChange:h,className:"w-full p-2 border border-gray-300 rounded",required:!0})]}),"pasteur"===t.type&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Ann\xe9e de minist\xe8re"}),(0,i.jsx)("input",{type:"number",name:"anneeMinistere",value:t.anneeMinistere,onChange:h,className:"w-full p-2 border border-gray-300 rounded",min:"1900",max:"2030"})]}),"diacre"===t.type&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Profession"}),(0,i.jsx)("input",{type:"text",name:"profession",value:t.profession,onChange:h,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Photo"}),(0,i.jsx)("input",{type:"file",name:"photo",onChange:b,className:"w-full p-2 border border-gray-300 rounded",accept:"image/*"})]}),"diacre"===t.type&&(0,i.jsxs)("div",{className:"border-t pt-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-eeadb-blue mb-3",children:"\xc9pouse du Diacre"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Nom"}),(0,i.jsx)("input",{type:"text",name:"epouse.nom",value:t.epouse.nom,onChange:h,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Pr\xe9noms"}),(0,i.jsx)("input",{type:"text",name:"epouse.prenoms",value:t.epouse.prenoms,onChange:h,className:"w-full p-2 border border-gray-300 rounded"})]})]}),(0,i.jsxs)("div",{className:"mt-2",children:[(0,i.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Poste"}),(0,i.jsx)("input",{type:"text",name:"epouse.poste",value:t.epouse.poste,onChange:h,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,i.jsxs)("div",{className:"mt-2",children:[(0,i.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Photo"}),(0,i.jsx)("input",{type:"file",name:"epouse.photo",onChange:b,className:"w-full p-2 border border-gray-300 rounded",accept:"image/*"})]})]}),(0,i.jsx)("button",{type:"submit",className:"w-full bg-eeadb-blue-700 hover:bg-eeadb-blue-800 text-white font-bold py-3 px-4 rounded transition-colors",children:"Enregistrer"})]})]}),(0,i.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-eeadb-blue mb-4",children:"Aper\xe7u des Dirigeants"}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-3",children:"Pasteurs"}),(0,i.jsx)("div",{className:"space-y-3",children:d.pasteur.map(e=>(0,i.jsxs)("div",{className:"border-b pb-2",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Nom:"})," ",e.nom]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Pr\xe9noms:"})," ",e.prenoms]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Poste:"})," ",e.poste]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Ann\xe9e de minist\xe8re:"})," ",e.anneeMinistere]})]},e.id))})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-3",children:"Diacres"}),(0,i.jsx)("div",{className:"space-y-3",children:d.diacres.map(e=>(0,i.jsxs)("div",{className:"border-b pb-2",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Nom:"})," ",e.nom]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Profession:"})," ",e.profession]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Poste:"})," ",e.poste]}),e.epouse&&(0,i.jsx)("div",{className:"ml-4 mt-2",children:(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"\xc9pouse:"})," ",e.epouse.nom]})})]},e.id))})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-3",children:"Responsables D\xe9partements"}),(0,i.jsx)("div",{className:"space-y-3",children:d.departements.map(e=>(0,i.jsxs)("div",{className:"border-b pb-2",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Nom:"})," ",e.nom]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Poste:"})," ",e.poste]}),e.membres&&e.membres.length>0&&(0,i.jsxs)("div",{className:"ml-4 mt-2",children:[(0,i.jsx)("p",{className:"font-medium",children:"Membres:"}),(0,i.jsx)("ul",{children:e.membres.map(e=>(0,i.jsxs)("li",{children:[e.nom," - ",e.poste]},e.id))})]})]},e.id))})]})]})]})]})})})})}},2592:function(e,s,n){"use strict";n.d(s,{a:function(){return l},default:function(){return m}});var r=n(2265),a=n(2921),t=n(7437);let i=(0,r.createContext)();function l(){return(0,r.useContext)(i)}let o=()=>{{let e=new URLSearchParams(window.location.search).get("token");if(e)return d(e)}return!1},d=e=>"admin123"===e;function m(e){let{children:s}=e,[n,l]=(0,r.useState)(null),[d,m]=(0,r.useState)(!0),c=(0,a.useRouter)(),u=async e=>{try{if(e&&e.username)return l(e),{success:!0,message:"Connexion r\xe9ussie"};return{success:!1,message:"Donn\xe9es d'utilisateur manquantes"}}catch(e){return{success:!1,message:"Erreur de connexion"}}},p=async()=>{try{l(null),c.push("/")}catch(e){console.error("Erreur de d\xe9connexion:",e)}},x=async()=>{try{o()?l({name:"Membre privil\xe9gi\xe9",role:"private_access"}):l(null)}catch(e){console.error("Erreur lors de la v\xe9rification de l'authentification:",e),l(null)}finally{m(!1)}};return(0,r.useEffect)(()=>{x()},[]),(0,t.jsx)(i.Provider,{value:{user:n,login:u,logout:p,loading:d,checkAuthStatus:x},children:s})}}},function(e){e.O(0,[971,529,744],function(){return e(e.s=8285)}),_N_E=e.O()}]);